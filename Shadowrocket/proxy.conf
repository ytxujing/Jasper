[General]
bypass-system = true
skip-proxy = 192.168.1.0/24, 192.168.5.0/24, 192.168.6.0/24, 192.168.100.0/24, 0.0.0.0/8, 10.0.0.0/8, 172.16.0.0/12, localhost, *.local, captive.apple.com
tun-excluded-routes = 0.0.0.0/8, 10.0.0.0/8, 100.64.0.0/10, 127.0.0.0/8, 169.254.0.0/16, 172.16.0.0/12, 192.0.0.0/24, 192.0.2.0/24, 192.88.99.0/24, 192.168.1.0/24, 192.168.5.0/24, 192.168.6.0/24, 192.168.100.0/24, 198.18.0.0/16, 198.51.100.0/24, 203.0.113.0/24, 224.0.0.0/4, 255.255.255.255/32
dns-server = https://dns.alidns.com/dns-query,https://doh.pub/dns-query
fallback-dns-server = 8.8.8.8,1.1.1.1
ipv6 = false
prefer-ipv6 = false
dns-direct-system = false
icmp-auto-reply = true
always-reject-url-rewrite = false
private-ip-answer = true

# direct domain fail to resolve use proxy rule
dns-direct-fallback-proxy = true

# The fallback behavior when UDP traffic matches a policy that doesn't support the UDP relay. Possible values: DIRECT, REJECT.
udp-policy-not-supported-behaviour = REJECT

[Rule]
# Block HTTP3/QUIC
# AND,((PROTOCOL,UDP),(DEST-PORT,443)),REJECT-NO-DROP

# LAN
IP-CIDR,192.168.123.0/24,PROXY,no-resolve
# j4105-BY
DOMAIN-SUFFIX,manoir.de5.net,PROXY
IP-CIDR,100.127.182.115/32,PROXY,no-resolve
# 单位台式机
DOMAIN-SUFFIX,htpc.de5.net,PROXY
IP-CIDR,100.71.188.111/32,PROXY,no-resolve
# MAC mini
DOMAIN-SUFFIX,ajing.de5.net,PROXY
IP-CIDR,100.76.252.107/32,PROXY,no-resolve
# HTPC
DOMAIN-SUFFIX,ytxujing.de5.net,PROXY
IP-CIDR,100.92.183.18/32,PROXY,no-resolve

# DIRECT
DOMAIN,ytxujing.asuscomm.com,DIRECT
DOMAIN,xujing.de5.net,DIRECT
DOMAIN-SUFFIX,ip6-localhost,DIRECT
DOMAIN-SUFFIX,ip6-loopback,DIRECT
DOMAIN-SUFFIX,lan,DIRECT
DOMAIN-SUFFIX,local,DIRECT
DOMAIN-SUFFIX,localhost,DIRECT
IP-CIDR6,::1/128,DIRECT,no-resolve
IP-CIDR6,fc00::/7,DIRECT,no-resolve
IP-CIDR6,fe80::/10,DIRECT,no-resolve
IP-CIDR6,fd00::/8,DIRECT,no-resolve
DOMAIN,instant.arubanetworks.com,DIRECT
DOMAIN,setmeup.arubanetworks.com,DIRECT
DOMAIN,router.asus.com,DIRECT
DOMAIN,www.asusrouter.com,DIRECT
DOMAIN-SUFFIX,hiwifi.com,DIRECT
DOMAIN-SUFFIX,leike.cc,DIRECT
DOMAIN-SUFFIX,miwifi.com,DIRECT
DOMAIN-SUFFIX,my.router,DIRECT
DOMAIN-SUFFIX,p.to,DIRECT
DOMAIN-SUFFIX,peiluyou.com,DIRECT
DOMAIN-SUFFIX,phicomm.me,DIRECT
DOMAIN-SUFFIX,router.ctc,DIRECT
DOMAIN-SUFFIX,routerlogin.com,DIRECT
DOMAIN-SUFFIX,tendawifi.com,DIRECT
DOMAIN-SUFFIX,zte.home,DIRECT
DOMAIN-SUFFIX,tplogin.cn,DIRECT
DOMAIN-SUFFIX,wifi.cmcccc,DIRECT
DOMAIN,ytxujing.asuscomm.com,DIRECT
DOMAIN,xujing.de5.net,DIRECT
DOMAIN-SUFFIX,tailsale.com,DIRECT
DOMAIN-SUFFIX,dns.alidns.com,DIRECT
IP-CIDR,114.114.114.114/32,DIRECT,no-resolve
IP-CIDR,114.114.115.115/32,DIRECT,no-resolve
IP-CIDR,223.5.5.5/32,DIRECT,no-resolve
IP-CIDR,223.6.6.6/32,DIRECT,no-resolve
IP-CIDR,119.29.29.29/32,DIRECT,no-resolve
DOMAIN-SUFFIX,services.googleapis.cn,DIRECT
DOMAIN-SUFFIX,googleapis.cn,DIRECT
DOMAIN-SUFFIX,xn--ngstr-lra8j.com,DIRECT
DOMAIN-SUFFIX,265.com,DIRECT
DOMAIN-SUFFIX,2mdn.net,DIRECT
DOMAIN-SUFFIX,alt1-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt2-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt3-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt4-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt5-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt6-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt7-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,alt8-mtalk.google.com,DIRECT
DOMAIN-SUFFIX,app-measurement.com,DIRECT
DOMAIN-SUFFIX,cache.pack.google.com,DIRECT
DOMAIN-SUFFIX,clickserve.dartsearch.net,DIRECT
DOMAIN-SUFFIX,crl.pki.goog,DIRECT
DOMAIN-SUFFIX,dl.google.com,DIRECT
DOMAIN-SUFFIX,dl.l.google.com,DIRECT
DOMAIN-SUFFIX,googletagmanager.com,DIRECT
DOMAIN-SUFFIX,googletagservices.com,DIRECT
DOMAIN-SUFFIX,gtm.oasisfeng.com,DIRECT
DOMAIN-SUFFIX,mtalk.google.com,DIRECT
DOMAIN-SUFFIX,ocsp.pki.goog,DIRECT
DOMAIN-SUFFIX,recaptcha.net,DIRECT
DOMAIN-SUFFIX,safebrowsing-cache.google.com,DIRECT
DOMAIN-SUFFIX,settings.crashlytics.com,DIRECT
DOMAIN-SUFFIX,ssl-google-analytics.l.google.com,DIRECT
DOMAIN-SUFFIX,toolbarqueries.google.com,DIRECT
DOMAIN-SUFFIX,tools.google.com,DIRECT
DOMAIN-SUFFIX,tools.l.google.com,DIRECT
DOMAIN-SUFFIX,www-googletagmanager.l.google.com,DIRECT
IP-CIDR,120.232.181.162/32,DIRECT,no-resolve
IP-CIDR,120.241.147.226/32,DIRECT,no-resolve
IP-CIDR,120.253.253.226/32,DIRECT,no-resolve
IP-CIDR,120.253.255.162/32,DIRECT,no-resolve
IP-CIDR,120.253.255.34/32,DIRECT,no-resolve
IP-CIDR,120.253.255.98/32,DIRECT,no-resolve
IP-CIDR,180.163.150.162/32,DIRECT,no-resolve
IP-CIDR,180.163.150.34/32,DIRECT,no-resolve
IP-CIDR,180.163.151.162/32,DIRECT,no-resolve
IP-CIDR,180.163.151.34/32,DIRECT,no-resolve
IP-CIDR,203.208.39.0/24,DIRECT,no-resolve
IP-CIDR,203.208.40.0/24,DIRECT,no-resolve
IP-CIDR,203.208.41.0/24,DIRECT,no-resolve
IP-CIDR,203.208.43.0/24,DIRECT,no-resolve
IP-CIDR,203.208.50.0/24,DIRECT,no-resolve
IP-CIDR,220.181.174.162/32,DIRECT,no-resolve
IP-CIDR,220.181.174.226/32,DIRECT,no-resolve
IP-CIDR,220.181.174.34/32,DIRECT,no-resolve

# GEO
GEOIP,CN,DIRECT

# Final
FINAL,PROXY

[Host]
localhost = 127.0.0.1
*testflight.apple.com = server:8.8.8.8

[URL Rewrite]

# ======= Google搜索重写  ======= #
^https?://(www.)?g.cn https://www.google.com 302
^https?://(www.)?google.cn https://www.google.com 302

# ======= 油管视频广告请求 ======= #
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!dclk_video_ads).+?)&ctier=L(&.+?),ctier,(.+) $1$2$3 302 
^https?:\/\/[\w-]+\.googlevideo\.com\/(?!(dclk_video_ads|videoplayback\?)).+&oad - reject

[Script]


[MITM]
# > Shadowrocket仅会解密hostname指定的域名的请求，可以使用通配符。也可以使用前缀 - 排除特定主机名，如 -*.example.com
# > iOS系统和某些应用有严格的安全策略，仅信任某些特定的证书，对这些域名启动解密可能导致问题，如 *.apple.com，*.icloud.com。
hostname = *.googlevideo.com, *.google.cn, -consumer.fcbox.com, -*huami.com, -*amemv.com, -*snssdk.com, -www.google.com

ca-passphrase = QrUIOPCj
ca-p12 = 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
enable = true
